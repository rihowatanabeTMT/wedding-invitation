<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>RSVP確認</title>
    <link rel="stylesheet" href="/css/base.css">
    <link rel="stylesheet" href="/css/rsvpComfirm.css">
</head>

<body>

<div th:replace="~{header :: globalHeader}"></div>

<div class="wrapper">
<main>
    <h1>入力内容の確認</h1>

    <!-- ★ 送信フォーム（hidden は不要） -->
    <form action="/rsvp/submit" method="post">

        <!-- 基本情報 -->
        <div class="form-group">
            <div class="confirm-line">
                <label>お名前：</label>
                <span th:text="${rsvpForm.lastName + ' ' + rsvpForm.firstName}"></span>
            </div>
        </div>

        <div class="form-group">
            <div class="confirm-line">
                <label>ふりがな：</label>
                <span th:text="${rsvpForm.lastNameKana + ' ' + rsvpForm.firstNameKana}"></span>
            </div>
        </div>

        <div class="form-group">
            <div class="confirm-line">
                <label>ローマ字：</label>
                <span th:text="${rsvpForm.lastNameEn + ' ' + rsvpForm.firstNameEn}"></span>
            </div>
        </div>

        <div class="form-group">
            <div class="confirm-line">
                <label>区分：</label>
                <span th:text="${rsvpForm.guestSide == 'groom' ? '新郎ゲスト' : '新婦ゲスト'}"></span>
            </div>
        </div>

        <div class="form-group">
            <div class="confirm-line">
                <label>関係性：</label>
                <span th:text="${
                    rsvpForm.relation == 'relative' ? '親族' :
                    rsvpForm.relation == 'senior' ? '先輩・上司' :
                    rsvpForm.relation == 'friend' ? '友人' : 'その他'
                }"></span>
            </div>
        </div>

        <div class="form-group">
            <div class="confirm-line">
                <label>ご出席：</label>
                <span th:text="${rsvpForm.attendance == 'yes' ? '出席' : '欠席'}"></span>
            </div>
        </div>

        <div class="form-group">
            <div class="confirm-line">
                <label>電話番号：</label>
                <span th:text="${rsvpForm.phone}"></span>
            </div>
        </div>

        <div class="form-group">
            <div class="confirm-line">
                <label>メールアドレス：</label>
                <span th:text="${rsvpForm.email}"></span>
            </div>
        </div>

        <div class="form-group">
            <div class="confirm-line">
                <label>郵便番号：</label>
                <span th:text="${rsvpForm.post}"></span>
            </div>
        </div>

        <div class="form-group">
            <div class="confirm-line">
                <label>都道府県：</label>
                <span th:text="${rsvpForm.prefecture}"></span>
            </div>
        </div>

        <div class="form-group">
            <div class="confirm-line">
                <label>市区町村・番地：</label>
                <span th:text="${rsvpForm.address}"></span>
            </div>
        </div>

        <div class="form-group">
            <div class="confirm-line">
                <label>建物名：</label>
                <span th:text="${rsvpForm.building}"></span>
            </div>
        </div>

        <div class="form-group">
            <div class="confirm-line">
                <label>宿泊施設：</label>
                <span th:text="${rsvpForm.hotel == 'yes' ? '利用する' : '利用しない'}"></span>
            </div>
        </div>

        <div class="form-group">
            <div class="confirm-line">
                <label>シャトルバス：</label>
                <span th:text="${rsvpForm.bus == 'yes' ? '利用する' : '利用しない'}"></span>
            </div>
        </div>

        <div class="form-group">
            <div class="confirm-line">
                <label>アレルギー：</label>
                <span th:text="${rsvpForm.allergy == 'yes' ? '有' : '無'}"></span>
            </div>
        </div>

        <div class="form-group" th:if="${rsvpForm.allergy} == 'yes'">
            <div class="confirm-line">
                <label>アレルギー詳細：</label>
                <span th:text="${rsvpForm.allergyText}"></span>
            </div>
        </div>

        <!-- 同伴者 -->
        <div class="form-group" th:if="${rsvpForm.plusones.size()} > 0">

            <div class="plusone-title-line">
                <label>同伴者情報</label>
                <span></span>
            </div>

            <div th:each="p, i : ${rsvpForm.plusones}">
                <div class="plusone-header">
                    <label th:text="'同伴者 ' + (${i.index} + 1)"></label>
                    <span></span>
                </div>

                <div class="confirm-line">
                    <label class="indent-label">お名前：</label>
                    <span th:text="${p.plusOneName}"></span>
                </div>

                <div class="confirm-line">
                    <label class="indent-label">ふりがな：</label>
                    <span th:text="${p.plusOneFurigana}"></span>
                </div>

                <div class="confirm-line">
                    <label class="indent-label">アレルギー：</label>
                    <span th:text="${p.plusOneAllergy}"></span>
                </div>
            </div>
        </div>

        <!-- メッセージ -->
        <div class="form-group">
            <div class="confirm-line">
                <label>メッセージ：</label>
                <span th:text="${rsvpForm.message}"></span>
            </div>
        </div>
		<input type="hidden" name="from" th:value="${from}">
        <button type="submit">送信</button>
    </form>

    <!-- ★ 戻るフォーム（hidden は残す） -->
    <form action="/rsvp" method="post" th:object="${rsvpForm}">
        <input type="hidden" th:field="*{lastName}">
        <input type="hidden" th:field="*{firstName}">
        <input type="hidden" th:field="*{lastNameKana}">
        <input type="hidden" th:field="*{firstNameKana}">
        <input type="hidden" th:field="*{lastNameEn}">
        <input type="hidden" th:field="*{firstNameEn}">
        <input type="hidden" th:field="*{guestSide}">
        <input type="hidden" th:field="*{relation}">
        <input type="hidden" th:field="*{attendance}">
        <input type="hidden" th:field="*{phone}">
        <input type="hidden" th:field="*{email}">
        <input type="hidden" th:field="*{post}">
        <input type="hidden" th:field="*{prefecture}">
        <input type="hidden" th:field="*{address}">
        <input type="hidden" th:field="*{building}">
        <input type="hidden" th:field="*{hotel}">
        <input type="hidden" th:field="*{bus}">
        <input type="hidden" th:field="*{allergy}">
        <input type="hidden" th:field="*{allergyText}">
        <input type="hidden" th:field="*{message}">
		<input type="hidden" name="from" th:value="${from}">
        <div th:each="p, i : *{plusones}">
            <input type="hidden" th:field="*{plusones[__${i.index}__].plusOneName}">
            <input type="hidden" th:field="*{plusones[__${i.index}__].plusOneFurigana}">
            <input type="hidden" th:field="*{plusones[__${i.index}__].plusOneAllergy}">
        </div>

        <button type="submit">戻る</button>
    </form>

</main>
<div th:replace="~{footer :: globalFooter}"></div>

</div>

<script src="/js/rsvp.js"></script>
<script src="/js/header.js"></script>

</body>
</html>